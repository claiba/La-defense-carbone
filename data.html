<!DOCTYPE html>
<html>
<meta charset="utf-8">
<style>
    body {
        font-family: 'Open Sans', sans-serif;
        animation: fadeInAnimation ease 2s;
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
        font-size: 18px;
        background: rgba(33, 106, 130, 1);
        user-select: none;
        overflow: hidden;
    }

    .container {
        position: absolute;
        right: -300px;
        top: 130px;
        height: 420px;
        width: 250px;
        z-index: 2000;
        border: 0px solid silver;
        border-radius: 5px;
        transition: ease 0.5s;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.9);
        background: rgba(33, 106, 130, 0.75);
        padding: 10px;
        color: white;
        font-size: 14px;
        opacity: 1;
        background-repeat: no-repeat;
        background-size: contain;
        ;
    }

    .slider {
        -webkit-appearance: none;
        width: 100%;
        height: 1px;
        background: gray;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
        margin-bottom: 10px;
    }

    .slider:hover {
        opacity: 1;
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: rgba(33, 106, 130, 1);
        cursor: pointer;
        border-width: 0px;
    }

    .slider::-moz-range-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: rgba(33, 106, 130, 1);
        cursor: pointer;
        border-width: 0px;
    }
</style>

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300&display=swap" rel="stylesheet">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/qgis2web.css">
    <link rel="stylesheet" href="css/fontawesome-all.min.css">
    <link rel="stylesheet" href="css/MarkerCluster.css">
    <link rel="stylesheet" href="css/MarkerCluster.Default.css">
    <!-- Choses à ajouter -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>


    <script async="" src="application/Chartjs/analytics.js"></script>
    <script src="application/Chartjs/Chart.js"></script>
    <script src="application/Chartjs/utils.js"></script>
    <script src="application/divanimation.js"></script>

    <link rel="icon" type="image/png" href="https://www.enia.fr/apple-icon-57x57.png" />
    <title>enialab : les outils</title>
</head>

<body>

    <div style="position: absolute;top:10px;left: 100px;width: 50px;height: 50px;
    background-image: url('application/images/building.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:1px solid black;border-radius: 5px;cursor: pointer;" id="construction propriete"
        onclick="choosepropriete('construction')">
    </div>

    <div style="position: absolute;top:10px;left: 160px;width: 50px;height: 50px;
    background-image: url('application/images/metro.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:0px solid black;border-radius: 5px;cursor: pointer;" id="transport propriete"
        onclick="choosepropriete('transport')">
    </div>

    <div style="position: absolute;top:10px;right: 500px;width: 50px;height: 50px;
    background-image: url('application/images/courbe.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:1px solid black;border-radius: 5px;cursor: pointer;" id="construction propriete"
        onclick="choosepropriete('construction')">
    </div>

    <div style="position: absolute;top:10px;right: 440px;width: 50px;height: 50px;
    background-image: url('application/images/cumule.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:1px solid black;border-radius: 5px;cursor: pointer;" id="construction propriete"
        onclick="choosepropriete('construction')">
    </div>

    <div style="position: absolute;top:10px;right: 380px;width: 50px;height: 50px;
    background-image: url('application/images/histogramme.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:1px solid black;border-radius: 5px;cursor: pointer;" id="construction propriete"
        onclick="choosepropriete('construction')">
    </div>

    <div style="position: absolute;top:10px;right: 320px;width: 50px;height: 50px;
    background-image: url('application/images/pie.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:1px solid black;border-radius: 5px;cursor: pointer;" id="transport propriete"
        onclick="choosepropriete('transport')">
    </div>


    <div style="position:absolute;top:70px;left:10px; right:300px;bottom:20px;background:none;opacity:1;padding:10px;transition: ease 0.5s;;"
        id="pokpok">
        <canvas id="ligne"></canvas>
    </div>

    <div style="position: absolute;top:40px;right:20px;width: 250px;height: 300px;" class="container">
        <table style="width: 100%;background-color: white;color: black;">
            <tr>
                <td style="width: 120px;text-align: right;padding-right: 5px;"><b>Construction neuve</b>
                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: right;padding-right: 5px;">Bureaux
                    <b><span id="bureau">0</span></b>
                </td>
            </tr>
            <tr>
                <td><input type="range" min=0 max=50 class="slider" step=0.01 value=0 onchange="updateChart()"
                        id="bureau slider">
                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: right;padding-right: 5px;">Logements
                    <b><span id="logement">0</span></b>
                </td>
            </tr>
            <tr>
                <td><input type="range" min=0 max=50 class="slider" step=0.01 value=0 onchange="updateChart()"
                        id="logement slider">
                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: right;padding-right: 5px;">
                    <b><span id="">&nbsp;</span></b>
                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: right;padding-right: 5px;"><b>Réhabilitation</b>
                </td>
            </tr>

            <tr>
                <td style="width: 120px;text-align: right;padding-right: 5px;">Bureaux
                    <b><span id="rehabilitation">0</span></b>%
                </td>
            </tr>
            <tr>
                <td><input type="range" min=0 max=100 class="slider" step=0.01 value=0 onchange="updateChart()"
                        id="rehabilitation slider">
                </td>
            </tr>

        </table>
    </div>
</body>
<script>

    var ctxk = document.getElementById("ligne").getContext('2d');
    var ligne = new Chart(ctxk, {
        type: "line",
        data: [], options: {
            maintainAspectRatio: false,
            legend: {
                display: false,
                position: 'top',
                labels: {
                    fontColor: 'white',
                    fontSize: 30,
                },
            },
            responsive: true,
            title: {
                display: false,
                text: "",
                fontFamily: "Candara",
                fontSize: 20,
                fontWeight: "normal",
            },
            scales: {
                yAxes: [
                    {
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: "tCO2/an",
                            fontColor: 'white',
                            fontSize: 30,
                        },
                        gridLines: {
                            color: 'gray',
                        },
                        ticks: {
                            beginAtZero: true,
                            fontColor: 'white'
                        },
                    }],
                xAxes: [{
                    ticks: {
                        fontColor: 'white',
                        align: 'right',

                    }
                }]

            },
        }
    });


    dt1 = [];
    dt2 = [];

    var lbl = [];
    for (var i = 0; i < 61; i++) {
        lbl[i] = i + 1990;
        dt1[i] = 100 * Math.random();
        dt2[i] = 100 * Math.random();
    }
    for (i = 1; i < 61; i++) {
        dt1[i] = dt1[i] + dt1[i - 1];
        dt2[i] = dt2[i] + dt2[i - 1];
    }
    for (i = 0; i < 61; i++) {
        dt2[i] = dt1[i] + dt2[i];
    }



    var dataL = {
        labels: lbl,
        datasets: [
            {
                label: 'Dataset',
                data: dt1,
                borderColor: 'rgba(0,0,0,0)',
                backgroundColor: 'rgba(0,0,0,0.5)',
                radius: 0,
                fill: true
            },
            {
                label: 'Datat',
                data: dt2,
                borderColor: 'white',
                backgroundColor: 'rgba(0,0,0,0.5)',
                radius: 0,
                fill: true
            }
        ]
    };

    ligne.config.data = dataL;
    ligne.config.type = 'line';
    ligne.config.options.legend.display = false;
    ligne.update()

    function updateChart() {

        v1 = parseFloat(document.getElementById('bureau slider').value);
        v2 = parseFloat(document.getElementById('logement slider').value);
        v3 = parseFloat(document.getElementById('rehabilitation slider').value);

        v = v1 + v2;

        lbl = [];
        dt1 = [];
        dt2 = [];
        for (var i = 0; i < 61; i++) {
            lbl[i] = i + 1990;
            dt1[i] = 100 * Math.random();
            dt2[i] = 100 * Math.random();
            if (i > 30) {
                dt1[i] = dt1[i] - v;
                dt2[i] = dt2[i] - v;
            }
        }
        for (var i = 1; i < 61; i++) {
            dt1[i] = dt1[i] + dt1[i - 1];
            dt2[i] = dt2[i] + dt2[i - 1];
        }
        for (var i = 0; i < 61; i++) {
            dt2[i] = dt1[i] + dt2[i];
        }
        for (var i = 0; i < 61; i++) {
            dt2[i] = dt1[i] + dt2[i];
        }
        document.getElementById('bureau').innerHTML = v1;
        document.getElementById('logement').innerHTML = v2;
        document.getElementById('rehabilitation').innerHTML = v3;


        dataU = {
            labels: lbl,
            datasets: [
                {
                    label: 'Dataset',
                    data: dt1,
                    borderColor: 'rgba(0,0,0,0)',
                    backgroundColor: 'rgba(0,0,0,0.5)',
                    radius: 0,
                    fill: true
                },
                {
                    label: 'Datat',
                    data: dt2,
                    borderColor: 'white',
                    backgroundColor: 'rgba(45,0,0,0.5)',
                    radius: 0,
                    fill: true
                }
            ]
        };

        ligne.config.data = dataU;
        ligne.config.type = 'line';
        ligne.config.options.legend.display = false;
        ligne.update()



    }

</script>