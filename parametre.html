<!DOCTYPE html>
<html>
<meta charset="utf-8">
<style>
    body {
        font-family: 'Open Sans', sans-serif;
        animation: fadeInAnimation ease 2s;
        animation-iteration-count: 1;
        animation-fill-mode: forwards;
        font-size: 18px;
        background: rgba(33, 106, 130, 1);
        user-select: none;
        overflow-x: hidden;
    }

    .container {
        position: absolute;
        right: -300px;
        top: 130px;
        height: 420px;
        width: 250px;
        z-index: 2000;
        border: 0px solid silver;
        border-radius: 5px;
        transition: ease 0.5s;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.9);
        background: rgba(33, 106, 130, 0.75);
        padding: 10px;
        color: white;
        font-size: 14px;
        opacity: 1;
        background-repeat: no-repeat;
        background-size: contain;
        ;
    }

    .slider {
        -webkit-appearance: none;
        width: 100%;
        height: 1px;
        background: gray;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
        margin-bottom: 10px;
    }

    .slider:hover {
        opacity: 1;
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: rgba(33, 106, 130, 1);
        cursor: pointer;
        border-width: 0px;
    }

    .slider::-moz-range-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: rgba(33, 106, 130, 1);
        cursor: pointer;
        border-width: 0px;
    }
</style>

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300&display=swap" rel="stylesheet">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/qgis2web.css">
    <link rel="stylesheet" href="css/fontawesome-all.min.css">
    <link rel="stylesheet" href="css/MarkerCluster.css">
    <link rel="stylesheet" href="css/MarkerCluster.Default.css">
    <!-- Choses à ajouter -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>


    <script async="" src="application/Chartjs/analytics.js"></script>
    <script src="application/Chartjs/Chart.js"></script>
    <script src="application/Chartjs/utils.js"></script>
    <script src="application/divanimation.js"></script>

    <link rel="icon" type="image/png" href="https://www.enia.fr/apple-icon-57x57.png" />
    <title>enialab : les outils</title>
</head>

<body>

    <div style="position: absolute;top:10px;left: 20px;width: 50px;height: 50px;
    background-image: url('application/images/building.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:1px solid black;border-radius: 5px;cursor: pointer;" id="construction propriete"
        onclick="choosepropriete('construction')">
    </div>

    <div style="position: absolute;top:10px;left: 80px;width: 50px;height: 50px;
    background-image: url('application/images/metro.png');background-size: contain;
    filter: brightness(200%) grayscale(100%) contrast(200%) invert(100%);background-repeat: no-repeat;
    border:0px solid black;border-radius: 5px;cursor: pointer;" id="transport propriete"
        onclick="choosepropriete('transport')">
    </div>




    <div style="position:absolute;top:70px;left:590px; right: 30px;height:350px;background:none;opacity:1;padding:10px;transition: ease 0.5s;;"
        id="pokpok">
        <canvas id="ligne"></canvas>
    </div>

    <div style="position: absolute;top:80px;left:20px;width: 550px;height: 350px;z-index: 2000;" class="container"
        id="table construction">
        <table style="width: 100%;background-color: white;color: black;font-size: 12px;" border="0" id="">
            <tr>
                <td style="text-align: right;padding-left: 0px;" colspan="5">
                    <select id="etat construction"
                        style="width: 270px;cursor: pointer;border: 0px solid silver;height: 30px;background: rgba(33, 106, 130, 0.75);color: white;text-align: left;font-size: 20px;"
                        onchange="chooseEtat('construction')">
                        <option value=0>Etat initial</option>
                        <option value=1>Réhabilitation</option>
                    </select>
                    <select id="annee construction"
                        style="width: 270px;cursor: pointer;border: 0px solid silver;height: 30px;background: rgba(33, 106, 130, 0.75);color: white;text-align: right;font-size: 20px;">
                        <option value="1969">1960-1974</option>
                        <option value="saab">1960-1974</option>
                        <option value="saab">1975-1982</option>
                        <option value="saab">1982-1988</option>
                        <option value="saab">1989-2012</option>
                        <option value="saab">2013-2020</option>
                    </select>
                    <br><br>
                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: left;padding-left: 10px;" colspan="5"><b>Type et année de
                        construction</b>
                </td>
            </tr>

            <tr>
                <td style="text-align: right;padding-right: 0px;">
                    <select name="cars" id="cars" multiple
                        style="width: 150px;cursor: pointer;height: 100px;border: 0px solid silver;"
                        onchange="updateChart()">
                        <option value="1969">Bureau</option>
                        <option value="saab">Logements</option>
                        <option value="saab">Hotel</option>
                        <option value="saab">Services
                        </option>
                    </select>
                </td>

                <td
                    style="text-align: right;padding-right: 5px;vertical-align: text-top;line-height: 24px;width: 200px;">
                    Contenu carbone : <br>
                    Besoin de chauffage<br>
                    Refroidissement<br>
                    Electricité spécifique<br>
                </td>
                <td style="text-align: left;padding-right: 5px;vertical-align: text-top;line-height: 24px;width: 60px;">
                    <input style="height: 16px;width: 60px;" onchange="updateChart()"><br>
                    <input style="height: 16px;width: 60px;" onchange="updateChart()"><br>
                    <input style="height: 16px;width: 60px;" onchange="updateChart()"><br>
                    <input style="height: 16px;width: 60px;" onchange="updateChart()"><br>
                </td>
                <td style="text-align: left;padding-right: 5px;vertical-align: text-top;line-height: 24px;">
                    kgCO2/m²<br>
                    kWheu/m²/an<br>
                    kWhef/m²<br>
                    kWhef/m²<br>
                </td>
            </tr>


            <tr>
                <td style="width: 120px;text-align: left;padding: 5px;" colspan="5">
                    <hr style="color: rgba(33, 106, 130, 0.5);width: 100%;">

                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: left;padding-left: 10px;" colspan="4">
                    <b>
                        Systèmes de chauffage
                    </b>
                </td>
            </tr>
            <tr>

                <td style="text-align: right;padding-right: 5px;">
                    <select name="cars" id="cars" multiple
                        style="width: 150px;cursor: pointer;height: 100px;border: 0px solid silver;"
                        onchange="updateChart()">
                        <option value="1969">Electrique</option>
                        <option value="saab">Gaz</option>
                        <option value="opel">Réseau de chaleur</option>
                    </select>
                </td>

                <td style="text-align: right;padding-right: 5px;vertical-align: text-top;line-height: 24px;">
                    Emissions : <br>
                    Rendement<br>
                </td>
                <td style="text-align: left;padding-right: 5px;vertical-align: text-top;line-height: 24px;width: 60px;">
                    <input style="height: 16px;width: 60px;" onchange="updateChart()"><br>
                    <input style="height: 16px;width: 60px;"><br>
                </td>
                <td style="text-align: left;padding-right: 5px;vertical-align: text-top;line-height: 24px;">
                    kgCO2/kWhef<br>
                    %<br>
                </td>
            </tr>
        </table>
    </div>

    <div style="position: absolute;top:80px;left:20px;width: 550px;height: 350px;opacity: 0;z-index: 0;"
        class="container" id="table transport">
        <table style="width: 100%;background-color: white;color: white;font-size: 12px;" border="0" id="">
            <tr>
                <td style="text-align: right;padding-left: 0px;" colspan="5">
                    <select id="etat transport"
                        style="width: 270px;cursor: pointer;border: 0px solid silver;height: 30px;background: rgba(33, 106, 130, 0.75);color: white;text-align: left;font-size: 20px;"
                        onchange="chooseEtat('transport')">
                        <option value=0>Avant 2020</option>
                        <option value=1>Après 2020</option>
                    </select>
                    <select id="annee transport"
                        style="width: 270px;cursor: pointer;border: 0px solid silver;height: 30px;background: rgba(33, 106, 130, 0.75);color: white;text-align: right;font-size: 20px;">
                        <option value="1969">1960-1974</option>
                        <option value="saab">1960-1974</option>
                        <option value="saab">1975-1982</option>
                        <option value="saab">1982-1988</option>
                        <option value="saab">1989-2012</option>
                        <option value="saab">2013-2020</option>
                    </select>
                    <br><br>
                </td>
            </tr>
            <tr>
                <td style="width: 120px;text-align: left;padding-left: 10px;color: black;" colspan="5">
                    <b> Emissions par mode de transport</b>
                </td>
            </tr>
            <tr>
                <td style="text-align: right;padding-right:15px;background: rgba(33, 106, 130, 0.75);display: flex;
                justify-content: right;
                align-items: center;
                text-align: right;">
                    <img src="application/images/metro.png" style="width: 40px;filter: invert(100%);">
                    <input value=8098 style="width: 80px;" id="fez">
                    &nbsp; gCO2/km
                </td>
            </tr>
            <tr>
                <td style="text-align: right;padding-right:15px;background: rgba(33, 106, 130, 0.75);display: flex;
                justify-content: right;
                align-items: center;
                text-align: right;">
                    <img src="application/images/voiture.png" style="width: 35px;filter: invert(100%);">
                    &nbsp;<input value=8098 style="width: 80px;" id="fez">
                    &nbsp; gCO2/km
                </td>
            </tr>

        </table>
    </div>


</body>
<script>

    var ctxk = document.getElementById("ligne").getContext('2d');
    var ligne = new Chart(ctxk, {
        type: "bar",
        data: [], options: {
            maintainAspectRatio: false,
            legend: {
                display: false,
                position: 'top',
                labels: {
                    fontColor: 'white',
                    fontSize: 30,
                },
            },
            responsive: true,
            title: {
                display: false,
                text: "",
                fontFamily: "Candara",
                fontSize: 20,
                fontWeight: "normal",
            },
            scales: {
                yAxes: [
                    {
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: "tCO2/an",
                            fontColor: 'white',
                            fontSize: 30,
                        },
                        gridLines: {
                            color: 'gray',
                        },
                        ticks: {
                            beginAtZero: true,
                            fontColor: 'white'
                        },
                    }],
                xAxes: [{
                    ticks: {
                        fontColor: 'white',
                        align: 'right',

                    }
                }]

            },
        }
    });


    dt1 = [];
    dt2 = [];

    var lbl = [];
    for (var i = 0; i < 61; i++) {
        lbl[i] = i + 1990;
        dt1[i] = 100 * Math.random();
        dt2[i] = 100 * Math.random();
    }
    for (i = 1; i < 61; i++) {
        dt1[i] = dt1[i] + dt1[i - 1];
        dt2[i] = dt2[i] + dt2[i - 1];
    }
    for (i = 0; i < 61; i++) {
        dt2[i] = dt1[i] + dt2[i];
    }



    var dataL = {
        labels: lbl,
        datasets: [
            {
                label: 'Dataset',
                data: dt1,
                borderColor: 'rgba(0,0,0,0)',
                backgroundColor: 'rgba(0,0,0,0.5)',
                radius: 0,
                fill: true
            },
            {
                label: 'Datat',
                data: dt2,
                borderColor: 'white',
                backgroundColor: 'rgba(0,0,0,0.5)',
                radius: 0,
                fill: true
            }
        ]
    };

    ligne.config.data = dataL;
    ligne.config.type = 'bar';
    ligne.config.options.legend.display = false;
    ligne.update()

    function updateChart() {

        v1 = 2;
        v2 = 3;
        v3 = 4;

        v = v1 + v2;

        lbl = [];
        dt1 = [];
        dt2 = [];
        for (var i = 0; i < 61; i++) {
            lbl[i] = i + 1990;
            dt1[i] = 100 * Math.random();
            dt2[i] = 100 * Math.random();
            if (i > 30) {
                dt1[i] = dt1[i] - v;
                dt2[i] = dt2[i] - v;
            }
        }
        for (var i = 1; i < 61; i++) {
            dt1[i] = dt1[i] + dt1[i - 1];
            dt2[i] = dt2[i] + dt2[i - 1];
        }
        for (var i = 0; i < 61; i++) {
            dt2[i] = dt1[i] + dt2[i];
        }
        for (var i = 0; i < 61; i++) {
            dt2[i] = dt1[i] + dt2[i];
        }



        dataU = {
            labels: lbl,
            datasets: [
                {
                    label: 'Dataset',
                    data: dt1,
                    borderColor: 'rgba(0,0,0,0)',
                    backgroundColor: 'rgba(0,0,0,0.5)',
                    radius: 0,
                    fill: true
                },
                {
                    label: 'Datat',
                    data: dt2,
                    borderColor: 'white',
                    backgroundColor: 'rgba(45,0,0,0.5)',
                    radius: 0,
                    fill: true
                }
            ]
        };

        ligne.config.data = dataU;
        ligne.config.type = 'line';
        ligne.config.options.legend.display = false;
        ligne.update()



    }
    function choosepropriete(str) {
        fld = ['construction', 'transport'];
        for (var n = 0; n < fld.length; n++) {
            document.getElementById(fld[n] + ' propriete').style.borderWidth = '0px';
            document.getElementById('table ' + fld[n]).style.top = '100px';
            document.getElementById('table ' + fld[n]).style.opacity = 0;
            document.getElementById('table ' + fld[n]).style.zIndex = 0;



        }
        document.getElementById(str + ' propriete').style.borderWidth = '1px';
        document.getElementById('table ' + str).style.top = '80px';
        document.getElementById('table ' + str).style.opacity = 1;
        document.getElementById('table ' + str).style.zIndex = 1000;
        selectbatiment(selection)
    }
    function chooseEtat(str) {
        if (str == 'construction') {
            v = document.getElementById('etat construction').value;
            if (v == 0) {
                document.getElementById('annee construction').innerHTML = '' +
                    '<option value="1969">1960-1974</option>' +
                    '<option value="saab">1960-1974</option>' +
                    '<option value="saab">1975-1982</option>' +
                    '<option value="saab">1982-1988</option>' +
                    '<option value="saab">1989-2012</option>' +
                    '<option value="saab">2013-2020</option>';
            } else {
                document.getElementById('annee construction').innerHTML = '' +
                    '<option value="1969">Réhabilitation de niveau 1</option>' +
                    '<option value="1969">Réhabilitation de niveau 2</option>' +
                    '<option value="1969">Réhabilitation de niveau 3</option>' +
                    '<option value="1969">Réhabilitation de niveau 4</option>' +
                    '<option value="1969">Réhabilitation de niveau 5</option>';
            }
        }

        if (str == 'transport') {
            v = document.getElementById('etat transport').value;
            if (v == 0) {
                document.getElementById('annee transport').innerHTML = '' +
                    '<option value="1969">1960-1974</option>' +
                    '<option value="saab">1960-1974</option>' +
                    '<option value="saab">1975-1982</option>' +
                    '<option value="saab">1982-1988</option>' +
                    '<option value="saab">1989-2012</option>' +
                    '<option value="saab">2013-2020</option>';
            } else {
                document.getElementById('annee transport').innerHTML = '' +
                    '<option value="1969">2020-2030</option>' +
                    '<option value="1969">2030-2050</option>';

            }
        }
    }
</script>